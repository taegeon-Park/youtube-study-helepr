{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\react\\\\test-study-redux\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\react\\\\test-study-redux\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\react\\\\test-study-redux\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\react\\\\test-study-redux\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\react\\\\test-study-redux\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\react\\\\test-study-redux\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Memo from'./Memo';import Youtube from'react-youtube';import httpGetConnection from'../../../modules/httpConnection/httpGetConnection';import'./NoteDetail.css';var NoteDetail=/*#__PURE__*/function(_Component){_inherits(NoteDetail,_Component);var _super=_createSuper(NoteDetail);function NoteDetail(){var _this;_classCallCheck(this,NoteDetail);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={memoList:[],title:\"This will be Title section\",content:\"This will be Content section\",youtubePlayer:null};return _this;}_createClass(NoteDetail,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _noteCode,_memoList,url;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_noteCode=this.props.note.noteCode;_memoList=[];if(!(_noteCode!==undefined|null)){_context.next=7;break;}url=\"http://110.11.49.218:8080/myapp/getNoteItems\";_context.next=6;return httpGetConnection(url,{userEmail:'vrimd1017@gmail.com',noteCode:_noteCode},function(){},function(){alert(\"Connection Fail\");});case 6:_memoList=_context.sent;case 7:this.setState({memoList:_memoList});case 8:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;var memoIndex=-1;var onStateChangeId=null;var memosWithIndex=this.state.memoList.map(function(memo){return Object.assign(memo,{index:++memoIndex});});var _onReady=function _onReady(e){_this2.setState({youtubePlayer:e.target});e.target.playVideo();var memoList=document.getElementById(\"memoList\");memoList.value=e.target;onStateChangeId=true;setTimeout(_onTimeChange(e.target),100);};var onClickMemoAdd=function onClickMemoAdd(e){if(_this2.state.youtubePlayer!==null)alert(_this2.state.youtubePlayer.getCurrentTime());};var _onChangeTitle=function _onChangeTitle(e){_this2.setState({title:e.target.value});};var _onChageContent=function _onChageContent(e){_this2.setState({content:e.target.value});};var _onChangeVideoTime=function _onChangeVideoTime(index){_this2.setState({title:memosWithIndex[index].memoTitle,content:memosWithIndex[index].memoContent});memoIndex=index;};var _onStateChange=function _onStateChange(e){onStateChangeId=false;var cState=e.target.getPlayerState();switch(cState){case-1:// 시작되지 않음\nbreak;case 0:// 종료\nbreak;case 1:onStateChangeId=true;setTimeout(_onTimeChange(e.target),100);// 재생중\nbreak;case 2:// 일시중지\nbreak;case 3:// 버퍼링\nbreak;case 5:// 버퍼링\nbreak;default:break;}};var _onTimeChange=function _onTimeChange(youtubeVideoPlayer){var clearTime=setInterval(function(){if(!onStateChangeId)clearTimeout(clearTime);var cTime=Number.parseInt(youtubeVideoPlayer.getCurrentTime());var cMemo=memosWithIndex.map(function(memo){return memo;}).filter(function(memo){return memo.memoTime===cTime;});if(cMemo.length>0){_this2.setState({title:cMemo[0].memoTitle,content:cMemo[0].memoContent});}},500);};var memoArray=memosWithIndex.map(function(memo){return/*#__PURE__*/React.createElement(Memo,{onStateChange:_onChangeVideoTime,key:memo.memoCode,memo:memo});});return/*#__PURE__*/React.createElement(\"div\",{className:\"NoteDetail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"YoutubeVideo\"},/*#__PURE__*/React.createElement(Youtube,{className:\"YoutubeVideoI\",videoId:this.props.note.noteURL,onReady:_onReady,onStateChange:_onStateChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"current-memo\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{className:\"current-memo-title common\",onChange:_onChangeTitle,value:this.state.title}),/*#__PURE__*/React.createElement(\"input\",{className:\"current-memo-content common\",onChange:_onChageContent,value:this.state.content})),/*#__PURE__*/React.createElement(\"button\",{className:\"memo-add-button\",onClick:onClickMemoAdd},\"ADD\"))),/*#__PURE__*/React.createElement(\"div\",{id:\"memoList\",className:\"MemoList\",value:\"\"},memoArray));}}]);return NoteDetail;}(Component);export{NoteDetail as default};","map":{"version":3,"sources":["D:/react/test-study-redux/src/components/Main/Note/NoteDetail.js"],"names":["React","Component","Memo","Youtube","httpGetConnection","NoteDetail","state","memoList","title","content","youtubePlayer","_noteCode","props","note","noteCode","_memoList","undefined","url","userEmail","alert","setState","memoIndex","onStateChangeId","memosWithIndex","map","memo","Object","assign","index","_onReady","e","target","playVideo","document","getElementById","value","setTimeout","_onTimeChange","onClickMemoAdd","getCurrentTime","_onChangeTitle","_onChageContent","_onChangeVideoTime","memoTitle","memoContent","_onStateChange","cState","getPlayerState","youtubeVideoPlayer","clearTime","setInterval","clearTimeout","cTime","Number","parseInt","cMemo","filter","memoTime","length","memoArray","memoCode","noteURL"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Memo from './Memo';\r\nimport Youtube from 'react-youtube';\r\nimport httpGetConnection from '../../../modules/httpConnection/httpGetConnection';\r\nimport './NoteDetail.css';\r\n\r\n\r\n\r\nexport default class NoteDetail extends Component {\r\n    state = {\r\n        memoList: [],\r\n        title: \"This will be Title section\",\r\n        content: \"This will be Content section\",\r\n        youtubePlayer: null\r\n    }\r\n\r\n    async componentDidMount() {\r\n        let _noteCode = this.props.note.noteCode\r\n        let _memoList = [];\r\n        if (_noteCode !== undefined | null) {\r\n          let url = \"http://110.11.49.218:8080/myapp/getNoteItems\";\r\n          _memoList = await httpGetConnection(url, { userEmail: 'vrimd1017@gmail.com', noteCode: _noteCode },\r\n            () =>{}\r\n            ,\r\n            () => { alert(\"Connection Fail\") }\r\n          )\r\n        }\r\n        this.setState({memoList:_memoList});\r\n    }\r\n\r\n    render() {\r\n        let memoIndex = -1;\r\n        let onStateChangeId = null;\r\n\r\n        let memosWithIndex = this.state.memoList.map(memo => Object.assign(memo, { index: ++memoIndex }))\r\n        let _onReady = (e) => {\r\n            this.setState({youtubePlayer: e.target});\r\n            e.target.playVideo();\r\n            const memoList = document.getElementById(\"memoList\");\r\n            memoList.value = e.target;\r\n            onStateChangeId = true;\r\n            setTimeout(_onTimeChange(e.target), 100);\r\n        }\r\n\r\n        let onClickMemoAdd = (e) => {\r\n            if (this.state.youtubePlayer !== null)\r\n                alert(this.state.youtubePlayer.getCurrentTime());\r\n        }\r\n\r\n        let _onChangeTitle = (e) => {\r\n            this.setState({\r\n                title: e.target.value\r\n            });\r\n        }\r\n        let _onChageContent = (e) => {\r\n            this.setState({\r\n                content: e.target.value\r\n            });\r\n        }\r\n\r\n        let _onChangeVideoTime = (index) => {\r\n            this.setState({\r\n                title: memosWithIndex[index].memoTitle,\r\n                content: memosWithIndex[index].memoContent\r\n            });\r\n            memoIndex = index;\r\n        }\r\n\r\n        let _onStateChange = (e) => {\r\n            onStateChangeId = false;\r\n            let cState = e.target.getPlayerState();\r\n            switch(cState) {\r\n                case -1:\r\n                    // 시작되지 않음\r\n                    break;\r\n                case 0:\r\n                    // 종료\r\n                    break;\r\n                case 1:\r\n                    onStateChangeId=true; setTimeout(_onTimeChange(e.target), 100);\r\n                    // 재생중\r\n                    break;\r\n                case 2:\r\n                    // 일시중지\r\n                    break;\r\n                case 3:\r\n                    // 버퍼링\r\n                    break;\r\n                case 5:\r\n                    // 버퍼링\r\n                    break\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        \r\n\r\n        let _onTimeChange = (youtubeVideoPlayer) => {\r\n            let clearTime = setInterval(() => {\r\n                    if(!onStateChangeId) clearTimeout(clearTime);\r\n                    let cTime = Number.parseInt(youtubeVideoPlayer.getCurrentTime());\r\n                    let cMemo = memosWithIndex.map(memo => memo).filter(memo => memo.memoTime === cTime);\r\n                    if (cMemo.length > 0) {\r\n                        this.setState({\r\n                            title: cMemo[0].memoTitle,\r\n                            content: cMemo[0].memoContent\r\n                        });\r\n                    }\r\n                }, 500);\r\n        }\r\n\r\n        let memoArray = memosWithIndex.map(memo => <Memo onStateChange={_onChangeVideoTime} key={memo.memoCode} memo={memo} />);\r\n        return (\r\n            <div className=\"NoteDetail\">\r\n                <div className=\"YoutubeVideo\">\r\n                    <Youtube className=\"YoutubeVideoI\" videoId={this.props.note.noteURL} onReady={_onReady} onStateChange={_onStateChange} />\r\n                    <div className=\"current-memo\">\r\n                        <div>\r\n                            <input className=\"current-memo-title common\" \r\n                                 onChange={_onChangeTitle} value={this.state.title}></input>\r\n                            <input className=\"current-memo-content common\" \r\n                                 onChange={_onChageContent} value={this.state.content}></input>\r\n                        </div>\r\n                        <button className=\"memo-add-button\" onClick={onClickMemoAdd}>ADD</button>\r\n                    </div>\r\n                </div>\r\n                <div id=\"memoList\" className=\"MemoList\" value=\"\">\r\n                    {memoArray}\r\n                </div> \r\n            </div>\r\n        )\r\n    };\r\n}"]},"metadata":{},"sourceType":"module"}